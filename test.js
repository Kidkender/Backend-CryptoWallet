const Client = require("bitcoin-core");

const client = new Client({
  network: "mainnet",
  username: "athena",
  password: "supersecretpasswordgoeshere",
  host: "0.tcp.ap.ngrok.io",
  port: 11039,
});

const blockHash =
  "000000000000000000007420633917a0f0cbbcc600df43a62f36658d730096e1";

const transactionHash =
  "7acbfd34ed1ea7f027679e8c577580136c8e538070cb830ab84be5005383782b";

const hexTransaction =
  "02000000000105355fd720ac58045343861fc3a6bc29eccc2d0e9394bdf965c4d73ea1b22161140100000017160014c188c6f016e332b74ed1cd9459111f53b581ecf2fdffffff6247d3d9388049b6fbfc7643984801a57ca0c3d92afb72b6fe4af9c3c0a55654000000001716001487bf3ba056ae846cd477b7caeaec134bccb45758fdffffffb3016905c369e4c3d120d4e3b3ee537e71b5c45a8d38ecae8122e5769e8d377100000000171600146deaebbf21f836e9a3843a98ba3dd2d5b8118bc9fdffffff48506a359ca723fc4b15ca53e6d67398b1559c9aa79f4f6237c83ab291198d560000000017160014a3bf602c7fdf9c75240be052e72902e0fb58f2f0fdffffff85772a2a2efbc82f290af6991818796a0005422a48f41c3688146742edb1b6f0000000001716001497158e8c77b41a23138f670bed0ea9b10e8aef5afdffffff0211f52d00000000001976a9143b181a22d4265171cea7e133439d0e83e3abd5c088ac3be16f0c0000000017a914fc85c6aa880c616db537a873607f610256285d7d870247304402200ef9b713da110f76373b358c10d0b700169c00f45ede6f1b3d72d2788d2137680220189b73c3c6d7b156785460c4f366a65abf25571d15826a9b6234a2004ccc42bf0121023634e479b58c58cb8cc1650684729c5c58765b245a4844aee2e39bca4da3f3f90247304402206a2a82a539af6bf8fb1996dadffb8b5e510376df120f35b194b0d6659dd1624502203508309e70481dd2691e860dfa9bcb997f473c84c85f4634dfc875b9b20f5b3d0121038666d27a0934eff3275850d2bc15d3eba99e7a76fed781e6f8966c5888b154200247304402206cb68e3ae05a53717c3ef061c929cd22decf25ae3966d63faeb742ed56dee6b102204209b44acbb962ad442ddfd4f7c391b5db2da874a92e582a0f89aefe31e82c46012102c81c90b304ca6ab8cf003b4e95582e56728a66a54329141f272ca112a1fe10e202473044022036bede2abe0b038f8111308bb9ed9cb5fea320af7890447e74f2c9bf66c38718022032d832cdf1c03ba5d00ea9ee3dc8ea02e4c60d32c2cbf0eb5555ec1720757d5a01210265a316d8e7a626a1812491ea60b3c9a5d3455c6252025915ada1f67b6cdbaf870247304402201cb7da5c3ecc895e0adfcc8c64435cbe0f4b31c529977b45e7f5b3d0d9c4dd1802204b0be786da72da9a857a6f4f9d07d1c5c9830971597ae0caf85b77bfb815b3d10121031e67bf98fac3967aae5ec7192882ee3531d1b4d2b7a2acebfe0a663d4741cc7200000000";

const convertToPlainObject = (obj) => {
  return JSON.parse(JSON.stringify(obj));
};

client
  .getRawTransaction(transactionHash, 1, blockHash)
  .then((block) => {
    const decodedBlock = convertToPlainObject(block);
    console.log("data: ", decodedBlock);
  })
  .catch((err) => {
    console.error(err);
  });
